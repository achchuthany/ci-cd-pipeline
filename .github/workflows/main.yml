name: CI/CD Pipeline

on:
  push:
    branches: [ "DEVELOP" ]
    tags:
      - v**
  pull_request:
    branches: [ "DEVELOP" ]
    tags:
      - v**
env:
  REGISTRY: ghcr.io
  IMAGE_NAME: ${{ github.repository }}

jobs:
  permissions:
    contents: read
    packages: write

  validate:
    uses: ./.github/workflows/validate.yml

  build:
    uses: ./.github/workflows/build.yml
    with:
      workflow: Build
      ref: ${{ github.ref }}
      inputs:
        DOCKER_USERNAME: ${{ github.actor }}
        DOCKER_PAT: ${{ secrets.DOCKER_PAT }}
